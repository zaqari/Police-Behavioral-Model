nsc.stay <- data$stay[data$m2 == 0]
nsc.inf <- data$inf[data$m2 == 0]
school_INF_line <- lm(sc.inf ~ sc.stay)
none_INF_line <- lm(nsc.inf ~ nsc.stay)
mean_school <- mean(sc.inf)
mean_no_school <- mean(nsc.inf)
s_sc <- sd(sc.inf)
s_nsc <-  sd(nsc.inf)
n_sc <- length(sc.inf)
n_nsc <-length(nsc.inf)
s.p=sqrt(((n_sc-1)*s_sc^2+(n_nsc-1)*s_nsc^2)/(length(sc.inf)+length(nsc.inf)-2))
tobs.m <- (mean_school-mean_no_school) / (s.p * sqrt(1/n_sc + 1/n_nsc))
p=pt(tobs.m)
#or, even easier and way less of a time suck . . . good practice though the above was
t.test(sc.inf, nsc.inf, var.equal = TRUE)
#(c regression t-stat)
sc.lm <- lm(sc.inf ~ sc.stay)
nsc.lm <- lm(nsc.inf ~ nsc.stay)
se2 = sum(data$residual^2)/(length(data$residual)-2)
tobs.regr <- (sc.lm$coefficients[2] - nsc.lm$coefficients[2]) / (se2 /sqrt((sum((data$stay - mean(data$stay))^2))))
data$residX <-data$residual*data$stay
sum(data$residX)
data$residX <-data$residual2*data$stay
data$residX <-data$residual*data$stay
data$residual2 <- data$residual^2
data$residX <-data$residual2*data$stay
sum(data$residX)
data$residX <-data$residual*data$stay
sum(data$residX)^2
library(tidyverse)
library(car)
library(lsmeans)
for(i in c(0,1,2)){i}
for(i in c(0,1,2)){print(i)}
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
for(i in c(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(log(data$cost) ~ i)}
log(data$cost)
for(i in c(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(log(data$cost), i)}
for(i in c(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(length(data$cost), length(i))}
data$logcost <- log(data$cost)
for(i in c(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(data$logcost, i)}
plot(data$logcost, data$age)
for(i in (data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(data$logcost, i)}
for(i in [data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur]){plot(data$logcost, i)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur){plot(data$logcost, i)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(data$logcost, i)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
clear
clc
library(car)
library(lsmeans)
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){
plot(i, data$logcost)
}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(data$logcost, i)}
data$logcost <- log(data$cost)
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
library(car)
library(lsmeans)
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
library(lsmeans)
library(tidyverse)
library(car)
library(lsmeans)
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(age, gender, interv, drugs, ervisit, complic, comorb, dur)){plot(data$i, logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost,ylab = i)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(i)plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){
print(i)
plot(i, data$logcost)
}
plot(data$age, data$logcost)
plot(data$age, data$logcost)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){
plot(i, data$logcost)
}
multireg <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur)
data$logcost
multireg
filter(data, data$logcost == -Inf)
data2 <- filter(data, data$logcost != -Inf)
data2 <-filter(data2, data2$logcost != Inf)
data2$age
multireg <- lm(data2$logcost ~ data2$age + data2$gender + data2$interv + data2$drugs + data2$ervisit + data2$complic + data2$comorb + data2$dur)
multireg
for(i in list(data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur)){cor(i + data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){cor(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(cor(i, data$logcost))}
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
data <- filter(data, data$logcost != -Inf)
data <-filter(data, data$logcost != Inf)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){cor(i, data$logcost)}
multireg <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(cor(i, data$logcost))}
data$resid <- residual(data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur, data$logcost)
data$resid
data$stdresid <- rstandard(multireg)
data$stdresid
data$ypred <- predict(multireg, data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur)
data$ypred <- predict(multireg, list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)
data$ypred <- predict(multireg, list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur))
data$ypred <- predict(multireg, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur))
qqplot(data$ypred, data$stdresid)
data$age2 <- data$age^2
library(tidyverse)
library(car)
library(lsmeans)
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
data <- filter(data, data$logcost != -Inf)
data <-filter(data, data$logcost != Inf)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(cor(i, data$logcost))}
multireg <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur)
data$resid <- residual(data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur, data$logcost)
data$stdresid <- rstandard(multireg)
data$ypred <- predict(multireg, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur))
qqplot(data$ypred, data$stdresid)
data$age2 <- data$age^2
data$dur2 <- data$dur^2
data$drug2 <-data$drug^2
data$drug2 <-data$drugs^2
multireg2 <- lm(data$logcost ~ data$age + data$age2 + data$gender + data$interv + data$drugs + data$drug2 + data$ervisit + data$complic + data$comorb + data$dur + data$dur2)
data$stdresid <- rstandard(multireg2)
data$ypred2 <- predict(multireg, data.frame(data$age, data$age2, data$gender, data$interv, data$drugs, data$drug2, data$ervisit, data$complic, data$comorb, data$dur, data$dur2))
qqplot(data$ypred2, data$stdresid)
multireg2 <- lm(data$logcost ~ data$age + data$age2 + data$gender + data$interv + data$drugs + data$drug2 + data$ervisit + data$complic + data$comorb + data$dur)
data$stdresid <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$age2, data$gender, data$interv, data$drugs, data$drug2, data$ervisit, data$complic, data$comorb, data$dur))
qqplot(data$ypred2, data$stdresid)
multireg2 <- lm(data$logcost ~ data$age + data$age2 + data$gender + data$interv + data$drugs + data$drug2 + data$ervisit + data$complic + data$comorb + data$dur +data$dur2)
data$stdresid <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$age2, data$gender, data$interv, data$drugs, data$drug2, data$ervisit, data$complic, data$comorb, data$dur + data$dur2))
qqplot(data$ypred2, data$stdresid)
multireg2 <- lm(data$logcost ~ data$age + data$age2 + data$gender + data$interv + data$drugs + data$drug2 + data$ervisit + data$complic + data$comorb + data$dur +data$dur2)
data$stdresid <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$age2, data$gender, data$interv, data$drugs, data$drug2, data$ervisit, data$complic, data$comorb, data$dur + data$dur2))
qqplot(data$ypred2, data$stdresid)
library(tidyverse)
library(car)
library(lsmeans)
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
data <- filter(data, data$logcost != -Inf)
data <-filter(data, data$logcost != Inf)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age^2 + data$interv^2 + data$drugs^2 + data$ervisit^2 + data$comorb^2 + data$dur^2)
data$stdresid <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age^2, data$interv^2, data$drugs^2, data$ervisit^2, data$comorb^2, data$dur^2))
qqplot(data$ypred2, data$stdresid)
library(tidyverse)
library(car)
library(lsmeans)
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
data <- filter(data, data$logcost != -Inf)
data <-filter(data, data$logcost != Inf)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(cor(i, data$logcost))}
library(tidyverse)
library(car)
library(lsmeans)
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
data <- filter(data, data$logcost != -Inf)
data <-filter(data, data$logcost != Inf)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(cor(i, data$logcost))}
library(tidyverse)
library(car)
library(lsmeans)
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
data <- filter(data, data$logcost != -Inf)
data <-filter(data, data$logcost != Inf)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(cor(i, data$logcost))}
multireg <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur)
data$stdresid <- rstandard(multireg)
multireg
data$ypred <- predict(multireg, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur))
qqplot(data$ypred, data$stdresid)
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age^2 + data$interv^2 + data$drugs^2 + data$ervisit^2 + data$comorb^2 + data$dur^2)
data$stdresid <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age^2, data$interv^2, data$drugs^2, data$ervisit^2, data$comorb^2, data$dur^2))
qqplot(data$ypred2, data$stdresid)
qqplot(data$ypred2, data$stdresid)
multireg3 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age^3 + data$interv^3 + data$drugs^3 + data$ervisit^3 + data$comorb^3 + data$dur^3)
data$stdresid <- rstandard(multireg3)
data$ypred3 <- predict(multireg3, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age^3, data$interv^3, data$drugs^3, data$ervisit^3, data$comorb^3, data$dur^3))
qqplot(data$ypred3, data$stdresid)
data$stdresid2 <-rstandard(multireg2)
qqplot(data$ypred2, data$stdresid2)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age^2 + data$interv^2 + data$comorb^2 + data$dur^2)
data$stdresid <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age^2, data$interv^2, data$comorb^2, data$dur^2))
qqplot(data$ypred2, data$stdresid)
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age^2)
data$stdresid <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age^2))
qqplot(data$ypred2, data$stdresid)
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$interv^2 )
data$stdresid <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$interv^2))
qqplot(data$ypred2, data$stdresid)
library(tidyverse)
library(car)
library(lsmeans)
residual <- function(x, y) y - tru_y(x)
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
data <- filter(data, data$logcost != -Inf)
data <-filter(data, data$logcost != Inf)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(cor(i, data$logcost))}
multireg <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur)
data$stdresid <- rstandard(multireg)
data$ypred <- predict(multireg, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur))
qqplot(data$ypred, data$stdresid)
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age^2 + data$interv^2 + data$drugs^2 + data$ervisit^2 + data$comorb^2 + data$dur^2)
data$stdresid2 <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age^2, data$interv^2, data$drugs^2, data$ervisit^2, data$comorb^2, data$dur^2))
qqplot(data$ypred2, data$stdresid2)
library(tidyverse)
library(car)
library(lsmeans)
residual <- function(y_, y) y_ - y
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
data <- filter(data, data$logcost != -Inf)
data <-filter(data, data$logcost != Inf)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(cor(i, data$logcost))}
multireg <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur)
data$stdresid <- rstandard(multireg)
data$ypred <- predict(multireg, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur))
qqplot(data$ypred, data$stdresid)
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age^2 + data$interv^2 + data$drugs^2 + data$ervisit^2 + data$comorb^2 + data$dur^2)
data$stdresid2 <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age^2, data$interv^2, data$drugs^2, data$ervisit^2, data$comorb^2, data$dur^2))
qqplot(data$ypred2, data$stdresid2)
data$stdresid
data$stdresid2
data$age2 <- data$age^2
data$interv2 <- data$interv^2
data$drugs2 <- data$drugs^2
data$ervisit2 <- data$ervisit^2
data$comorb2 <- data$comorb^2
data$dur2 <-data$dur^2
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age2 + data$interv2 + data$drugs2 + data$ervisit2 + data$comorb2 + data$dur2)
data$stdresid2 <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age2, data$interv2, data$drugs2, data$ervisit2, data$comorb2, data$dur2))
qqplot(data$ypred2, data$stdresid2)
library(tidyverse)
library(car)
library(lsmeans)
residual <- function(y_, y) y_ - y
datain = read_csv('/Users/ZaqRosen/Documents/Academe/UCI/fa2019/stats210/datasets/ischemic.csv')
data <- data.frame(datain)
data$logcost <- log(data$cost)
data <- filter(data, data$logcost != -Inf)
data <-filter(data, data$logcost != Inf)
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){plot(i, data$logcost)}
for(i in list(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur)){print(cor(i, data$logcost))}
multireg <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur)
data$stdresid <- rstandard(multireg)
data$ypred <- predict(multireg, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur))
qqplot(data$ypred, data$stdresid)
data$age2 <- data$age^2
data$interv2 <- data$interv^2
data$drugs2 <- data$drugs^2
data$ervisit2 <- data$ervisit^2
data$comorb2 <- data$comorb^2
data$dur2 <-data$dur^2
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age2 + data$interv2 + data$drugs2 + data$ervisit2 + data$comorb2 + data$dur2)
data$stdresid2 <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age2, data$interv2, data$drugs2, data$ervisit2, data$comorb2, data$dur2))
qqplot(data$ypred2, data$stdresid2)
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age2 + data$interv2 + data$drugs2 + data$ervisit2 + data$comorb2)
data$stdresid2 <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age2, data$interv2, data$drugs2, data$ervisit2, data$comorb2))
qqplot(data$ypred2, data$stdresid2)
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$complic + data$comorb + data$dur + data$age2 + data$interv2 + data$drugs2 + data$ervisit2 + data$comorb2)
data$stdresid2 <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age2, data$interv2, data$drugs2,  data$comorb2))
qqplot(data$ypred2, data$stdresid2)
multireg2 <- lm(data$logcost ~ data$age + data$gender + data$interv + data$drugs + data$ervisit + data$complic + data$comorb + data$dur + data$age2 + data$interv2 + data$drugs2 + data$ervisit2 + data$comorb2 + data$dur2)
data$stdresid2 <- rstandard(multireg2)
data$ypred2 <- predict(multireg2, data.frame(data$age, data$gender, data$interv, data$drugs, data$ervisit, data$complic, data$comorb, data$dur, data$age2, data$interv2, data$drugs2, data$ervisit2, data$comorb2, data$dur2))
qqplot(data$ypred2, data$stdresid2)
multireg2
install.packages('rstan')
library('rstan')
model_code <- "
data {int<lower=1> n; vector[n] y;}
parameters {real mu; real<lower=0> sigma2;}
transformed parameters {real<lower=0> sigma; sigma = sqrt(sigma2);}
model {mu ~ normal(100,10); sigma2 ~ inv_gamma(.1,.1); y ~ normal(mu, sigma);}
"
model <- stan_model(model_code = model_code)
libary('rnorm')
install.packages('rjags')
library('rjags')
library("rjags")
library("rjags")
library("rjags")
library("rjags")
(0.91527332-0.81577345)/0.81577345
(0.90538375-0.80451038)/0.80451038
(0.90538375-0.85228769)/0.85228769
(0.91527332-0.8330876)/0.8330876
0.12197/0.09865195 #non-COSSIM
0.1253848/0.06229828 #COSSIM
.06229828/0.1253848
library(ggplot2)
library(ggExtra)
library(R2jags)
bb <-rbeta(100,1,1)
lines(density(bb, from=0, to=10), lty=1, lwd=2, col="cadetblue")
layout(matrix(c(1,2),2,1))
layout.show(2)
plot(density(bb, from=-1, to=14), xlab="mu", ylab="density", main="Prior and Posterior Mu")
bb <-rbeta(100,1,1)
bb <-rbeta(10000,1,1)
plot(density(bb, from=-1, to=14), xlab="mu", ylab="density", main="Prior and Posterior Mu")
bb <-rbeta(100,1,4)
plot(density(bb, from=-1, to=14), xlab="mu", ylab="density", main="Prior and Posterior Mu")
plot(density(bb, from=-1, to=2), xlab="mu", ylab="density", main="Prior and Posterior Mu")
bb <-rbeta(100,1,1)
plot(density(bb, from=-1, to=2), xlab="mu", ylab="density", main="Prior and Posterior Mu")
bb <-rbeta(100,1,4)
plot(density(bb, from=-1, to=2), xlab="mu", ylab="density", main="Prior and Posterior Mu")
y <- t(matrix(c(list(0,1,8,3,0),
list(2,3,9,2,1),
list(1,1,6,3,2)),
nrow=5, ncol=3)
)
PD <- 3 #sum(sub1$fpos)
CITY <- 5 #sum(sub1$hits)
nmax <- 40
data <- list("PD", "CITY", 'y', 'nmax')
myinits <- list(list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5), 'alpha'=rep(runif(1,0,1),3)),
list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5),'alpha'=rep(runif(1,0,1),3)),
list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5),'alpha'=rep(runif(1,0,1),3))
)
parameters <- c('theta', 'bias', 'sigma', 'N', 'alpha')
samples <- jags(data, inits=myinits, parameters,
model.file ="badPDxCom.txt", n.chains=3, n.iter=10000,
n.burnin=1000, n.thin=1, DIC=T)
# clears workspace:
rm(list=ls())
# sets working directories:
setwd("/Volumes/V\'GER/comp_ling/SocialJusticeInitiatives/")
library(R2jags)
library(ggplot2)
y <- t(matrix(c(list(0,1,8,3,0),
list(2,3,9,2,1),
list(1,1,6,3,2)),
nrow=5, ncol=3)
)
PD <- 3 #sum(sub1$fpos)
CITY <- 5 #sum(sub1$hits)
nmax <- 40
data <- list("PD", "CITY", 'y', 'nmax')
myinits <- list(list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5), 'alpha'=rep(runif(1,0,1),3)),
list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5),'alpha'=rep(runif(1,0,1),3)),
list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5),'alpha'=rep(runif(1,0,1),3))
)
parameters <- c('theta', 'bias', 'sigma', 'N', 'alpha')
samples <- jags(data, inits=myinits, parameters,
model.file ="badPDxCom.txt", n.chains=3, n.iter=10000,
n.burnin=1000, n.thin=1, DIC=T)
plot(density(samples$BUGSoutput$sims.list$bias[,3]))
plot(density(samples$BUGSoutput$sims.list$bias[,1]))
plot(density(samples$BUGSoutput$sims.list$bias[,2]))
plot(density(samples$BUGSoutput$sims.list$bias[,4]))
plot(density(samples$BUGSoutput$sims.list$bias[,5]))
plot(density(samples$BUGSoutput$sims.list$theta[,3,2]))
plot(density(samples$BUGSoutput$sims.list$theta[,3,1]))
plot(density(samples$BUGSoutput$sims.list$theta[,3,3]))
plot(density(samples$BUGSoutput$sims.list$theta[,1,3]))
plot(density(samples$BUGSoutput$sims.list$theta[,1,2]))
plot(density(samples$BUGSoutput$sims.list$theta[,1,3]))
plot(density(samples$BUGSoutput$sims.list$bias))
sub <- data.frame(N=samples$BUGSoutput$sims.list$N[,3],
bias=samples$BUGSoutput$sims.list$bias[,3])
plotbody <-ggplot(sub, aes(N, bias)) + geom_point() + theme_classic() + ggtitle('Posterior Predictive Plot')
ggExtra::ggMarginal(plotbody,type="densigram")
plotbody <-ggplot(sub, aes(N, bias)) + geom_point() + theme_classic() + ggtitle('Posterior Predictive Plot')
ggExtra::ggMarginal(plotbody,type="densigram")
plotbody <-ggplot(sub, aes(N, bias)) + geom_point() + theme_classic() + ggtitle('Posterior Predictive Plot')
ggExtra::ggMarginal(plotbody,type="densigram")
y <- t(matrix(c(list(0,1,8,3,0),
list(2,3,9,2,1),
list(1,1,6,3,2)),
nrow=5, ncol=3)
)
PD <- 3 #sum(sub1$fpos)
CITY <- 5 #sum(sub1$hits)
nmax <- 40
data <- list("PD", "CITY", 'y', 'nmax')
myinits <- list(list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5), 'alpha'=rep(runif(1,0,1),3)),
list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5),'alpha'=rep(runif(1,0,1),3)),
list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5),'alpha'=rep(runif(1,0,1),3))
)
parameters <- c('theta', 'bias', 'sigma', 'N', 'alpha')
samples <- jags(data, inits=myinits, parameters,
model.file ="badPDxCom.txt", n.chains=3, n.iter=10000,
n.burnin=1000, n.thin=500, DIC=T)
sub <- data.frame(N=samples$BUGSoutput$sims.list$N[,3],
bias=samples$BUGSoutput$sims.list$bias[,3])
plotbody <-ggplot(sub, aes(N, bias)) + geom_point() + theme_classic() + ggtitle('Posterior Predictive Plot')
ggExtra::ggMarginal(plotbody,type="densigram")
sub <- data.frame(N=samples$BUGSoutput$sims.list$N[,1],
bias=samples$BUGSoutput$sims.list$bias[,1])
plotbody <-ggplot(sub, aes(N, bias)) + geom_point() + theme_classic() + ggtitle('Posterior Predictive Plot')
ggExtra::ggMarginal(plotbody,type="densigram")
sub <- data.frame(N=samples$BUGSoutput$sims.list$bias[,1],
bias=samples$BUGSoutput$sims.list$bias[,3])
plotbody <-ggplot(sub, aes(N, bias)) + geom_point() + theme_classic() + ggtitle('Posterior Predictive Plot')
ggExtra::ggMarginal(plotbody,type="densigram")
y <- t(matrix(c(list(0,1,8,3,0),
list(2,3,9,2,1),
list(1,1,6,3,2)),
nrow=5, ncol=3)
)
PD <- 3 #sum(sub1$fpos)
CITY <- 5 #sum(sub1$hits)
nmax <- 40
data <- list("PD", "CITY", 'y', 'nmax')
myinits <- list(list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5), 'alpha'=rep(runif(1,0,1),3)),
list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5),'alpha'=rep(runif(1,0,1),3)),
list('theta'=matrix(runif(1,0,1),5,3), 'N'=rep(nmax,5), 'sigma'=matrix(runif(1,0,1),3,5), 'bias'=rep(runif(1,0,1),5),'alpha'=rep(runif(1,0,1),3))
)
parameters <- c('theta', 'bias', 'sigma', 'N', 'alpha')
samples <- jags(data, inits=myinits, parameters,
model.file ="badPDxCom.txt", n.chains=3, n.iter=10000,
n.burnin=1000, n.thin=1, DIC=T)
sub <- data.frame(N=samples$BUGSoutput$sims.list$bias[,1],
bias=samples$BUGSoutput$sims.list$bias[,3])
plotbody <-ggplot(sub, aes(N, bias)) + geom_point() + theme_classic() + ggtitle('Posterior Predictive Plot')
ggExtra::ggMarginal(plotbody,type="densigram")
plot(density(samples$BUGSoutput$sims.list$bias[,3]))
plot(density(samples$BUGSoutput$sims.list$bias[,1]))
plot(density(samples$BUGSoutput$sims.list$bias[,2]))
plot(density(samples$BUGSoutput$sims.list$bias[,4]))
plot(density(samples$BUGSoutput$sims.list$bias[,5]))
y <- t(matrix(c(list(0,1,8,3,0),
list(0,3,9,0,1),
list(1,1,6,3,2)),
nrow=5, ncol=3)
)
N <- t(matrix(c(list(3,4,13,6,10),
list(10,10,11,10,10),
list(3,4,12,10,10)),
nrow=5, ncol=3)
)
PD <- 3 #sum(sub1$fpos)
CITY <- 5 #sum(sub1$hits)
nmax <- 100
data <- list("PD", "CITY", 'y', 'N')
myinits <- list(list('theta'=matrix(runif(1,0,1),5,3), 'sigma'=matrix(runif(1,0,1),3,5), 'delta'=rep(runif(1,0,1),5)),
list('theta'=matrix(runif(1,0,1),5,3), 'sigma'=matrix(runif(1,0,1),3,5), 'delta'=rep(runif(1,0,1),5)),
list('theta'=matrix(runif(1,0,1),5,3), 'sigma'=matrix(runif(1,0,1),3,5), 'delta'=rep(runif(1,0,1),5))
)
myinits <- list(list('theta'=matrix(runif(1,0,1),5,3), 'alpha'=rep(runif(1,0,1),3), 'delta'=rep(runif(1,0,1),5)),
list('theta'=matrix(runif(1,0,1),5,3), 'alpha'=rep(runif(1,0,1),3), 'delta'=rep(runif(1,0,1),5)),
list('theta'=matrix(runif(1,0,1),5,3), 'alpha'=rep(runif(1,0,1),3), 'delta'=rep(runif(1,0,1),5))
)
parameters <- c('theta', 'N', 'delta', 'sigma', 'alpha')
samples <- jags(data, inits=myinits, parameters,
model.file ="badPDxComN.txt", n.chains=3, n.iter=10000,
n.burnin=5000, n.thin=1, DIC=T)
plot(density(samples$BUGSoutput$sims.list$delta[,5]))
plot(density(samples$BUGSoutput$sims.list$delta[,3]))
plot(density(samples$BUGSoutput$sims.list$delta[,4]))
plot(density(samples$BUGSoutput$sims.list$delta[,1]))
plot(density(samples$BUGSoutput$sims.list$delta[,2]))
plot(density(samples$BUGSoutput$sims.list$delta[,3]))
plot(density(samples$BUGSoutput$sims.list$theta[,3,2]))
plot(density(samples$BUGSoutput$sims.list$theta[,3,1]))
plot(density(samples$BUGSoutput$sims.list$theta[,3,3]))
plot(density(samples$BUGSoutput$sims.list$theta[,5,3]))
plot(density(samples$BUGSoutput$sims.list$theta[,5,2]))
plot(density(samples$BUGSoutput$sims.list$theta[,5,1]))
plot(density(samples$BUGSoutput$sims.list$alpha[,2]))
plot(density(samples$BUGSoutput$sims.list$alpha[,1]))
plot(density(samples$BUGSoutput$sims.list$alpha[,3]))
